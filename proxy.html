<html>
<head>
<title>AJAX Proxy</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/json2-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/underscore-1.3.3-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/backbone-0.9.2-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/stackmob-0.3.0-min.js"></script>

<script type="text/javascript">
  StackMob.init({
    appName: "proxyexperiment",
    clientSubdomain: "tai",
    apiVersion: 0
  });
</script>

<script type="text/javascript">

  $(document).ready(function() {
  	
  	window.parent.postMessage({
  		response: {
  			success: true,
  			data: { stuff: 'hi' } 
  		}
  	}, 'http://127.0.0.1:4567');
  	
  	window.addEventListener('message', function(event) {
        if (event.origin == "http://127.0.0.1:4567") {
        	var result = {
        		msg: 'hello world'
        	};
        	
          event.source.postMessage(JSON.stringify(result),  
                           event.origin); 
        }
      }, false);  
  	
  });
</script>
</head>
<body>
</body>
</html>